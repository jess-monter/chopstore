<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Chopstore</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        <link href="https://use.fontawesome.com/releases/v5.13.0/css/all.css" rel="stylesheet">
        <link th:href="@{/css/choppr-styles.css}" rel="stylesheet">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    </head>

    <body>
        <!--  -->
        <div th:replace="cabecera :: cabecera-comprador"></div>
        <div class="container">
            <div class="py-5 text-center">
              
              <h2>Proceder al pago</h2>
            </div>
          
            <div class="row">
              <div class="col-md-4 order-md-2 mb-4">
                <h4 class="d-flex justify-content-between align-items-center mb-3">
                  <span class="text-muted">Resumen del Pedido</span>
                </h4>
                <ul class="list-group mb-3 show-cart-checkout"></ul>
              </div>
              <div class="col-md-8 order-md-1">
                <h4 class="mb-3">Datos de Envío</h4>
                <hr class="mb-4">
                <h5 class="mb-3">Destinatario</h4>
                <form class="needs-validation" novalidate>
                  <div class="row">
                    <div class="col-md-4 mb-3">
                      <label for="firstName">Nombre</label>
                      <input type="text" class="form-control" id="nombre" placeholder="" value="" required>
                      <div class="invalid-feedback">
                        Por favor ingresa un nombre válido.
                      </div>
                    </div>
                    <div class="col-md-4 mb-3">
                      <label for="lastName">Apellido Paterno</label>
                      <input type="text" class="form-control" id="apellido-paterno" placeholder="" value="" required>
                      <div class="invalid-feedback">
                        Por favor ingresa un apellido válido.
                      </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <label for="lastName">Apellido Materno</label>
                        <input type="text" class="form-control" id="apellido-materno" placeholder="" value="" required>
                    </div>
                  </div>
                  <hr class="mb-4">
                  <h5 class="mb-3">Dirección</h4>
                  <div class="row">
                    <div class="col-md-4 mb-3">
                        <label for="calle">Calle</label>
                        <input type="text" class="form-control" id="calle" placeholder="" value="" required>
                        <div class="invalid-feedback">
                          Por favor ingresa una calle válida.
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <label for="calle">Número Exterior</label>
                        <input type="text" class="form-control" id="numero-exterior" placeholder="" value="" required>
                        <div class="invalid-feedback">
                          Por favor ingresa un número exterior válido.
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <label for="calle">Número Interior</label>
                        <input type="text" class="form-control" id="calle" placeholder="" value="" required>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-4 mb-3">
                        <label for="calle">Colonia</label>
                        <input type="text" class="form-control" id="colonia" placeholder="" value="" required>
                        <div class="invalid-feedback">
                          Por favor ingresa una colonia válida.
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <label for="calle">Código Postal</label>
                        <input type="text" class="form-control" id="codigo-postal" placeholder="" value="" required>
                        <div class="invalid-feedback">
                          Por favor ingresa un código postal válido.
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <label for="calle">Teléfono</label>
                        <input type="text" class="form-control" id="telefono" placeholder="" value="" required>
                        <div class="invalid-feedback">
                          Por favor ingresa un teléfono de 10 dígitos.
                        </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-4 mb-3">
                      <label for="country">País</label>
                      <select class="form-select form-select-md mb-3" id="pais" required>
                        <option value="">Elige...</option>
                        <option>México</option>
                      </select>
                      <div class="invalid-feedback">
                        Por favor selecciona un país válido.
                      </div>
                    </div>
                    <div class="col-md-4 mb-3">
                      <label for="state">Entidad Federativa</label>
                      <select class="form-select form-select-md mb-3" id="estado" required>
                        <option value="">Elige...</option>
                        <option>Aguascalientes</option>
                        <option>Baja California</option>
                        <option>Baja California Sur</option>
                        <option>Campeche</option>
                        <option>Chiapas</option>
                        <option>Chihuahua</option>
                        <option>Ciudad de México</option>
                        <option>Coahuila</option>
                        <option>Colima</option>
                        <option>Durango</option>
                        <option>Estado de México</option>
                        <option>Guanajuato</option>
                        <option>Guerrero</option>
                        <option>Hidalgo</option>
                        <option>Jalisco</option>
                        <option>Michoacán</option>
                        <option>Morelos</option>
                        <option>Nayarit</option>
                        <option>Nuevo León</option>
                        <option>Oaxaca</option>
                        <option>Puebla</option>
                        <option>Querétaro</option>
                        <option>Quintana Roo</option>
                        <option>San Luis Potosí</option>
                        <option>Sinaloa</option>
                        <option>Sonora</option>
                        <option>Tabasco</option>
                        <option>Tamaulipas</option>
                        <option>Tlaxcala</option>
                        <option>Veracruz</option>
                        <option>Yucatán</option>
                        <option>Zacatecas</option>
                      </select>
                      <div class="invalid-feedback">
                        Por favor ingresa un estado válido.
                      </div>
                    </div>
                    <div class="col-md-4 mb-3">
                      <label for="municipality">Delegación o Municipio</label>
                      <input type="text" class="form-control" id="municipio" placeholder="" required>
                      <div class="invalid-feedback">
                        Dato requerido.
                      </div>
                    </div>
                  </div>

                  <hr class="mb-4">
                  <h4 class="mb-3">Tipo de Envío</h4>
          
                  <div class="d-block my-3">
                    <div class="custom-control custom-radio">
                      <input id="credit" name="shippingMethod" type="radio" class="custom-control-input" checked required>
                      <label class="custom-control-label" for="credit">Estándar ($77.00) </label>
                    </div>
                    <div class="custom-control custom-radio">
                      <input id="debit" name="shippingMethod" type="radio" class="custom-control-input" required>
                      <label class="custom-control-label" for="debit">Express ($200.00) </label>
                    </div>
                  </div>

                  <hr class="mb-4">
                  <h4 class="mb-3">Forma de Pago</h4>
          
                  <div class="d-block my-3">
                    <div class="custom-control custom-radio">
                      <input id="credit" name="paymentMethod" type="radio" class="custom-control-input" checked required>
                      <label class="custom-control-label" for="credit">Tarjeta de Crédito</label>
                    </div>
                    <div class="custom-control custom-radio">
                      <input id="debit" name="paymentMethod" type="radio" class="custom-control-input" required>
                      <label class="custom-control-label" for="debit">Tarjeta de Débito</label>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-6 mb-3">
                      <label for="cc-name">Nombre en la tarjeta</label>
                      <input type="text" class="form-control" id="cc-name" placeholder="" required>
                      <small class="text-muted">Nombre completo como se muestra en la tarjeta</small>
                      <div class="invalid-feedback">
                        El nombre en la tarjeta es obligatorio
                      </div>
                    </div>
                    <div class="col-md-6 mb-3">
                      <label for="cc-number">Número de tarjeta</label>
                      <input type="text" class="form-control" id="cc-number" placeholder="" required>
                      <div class="invalid-feedback">
                        Número de la tarjeta obligatorio
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-3 mb-3">
                      <label for="cc-expiration">Vencimiento</label>
                      <input type="text" class="form-control" id="cc-expiration" placeholder="MM/YY" required>
                      <div class="invalid-feedback">
                        Fecha de Vencimiento obligatoria
                      </div>
                    </div>
                    <div class="col-md-3 mb-3">
                      <label for="cc-cvv">CVV</label>
                      <input type="text" class="form-control" id="cc-cvv" placeholder="123" required>
                      <div class="invalid-feedback">
                        Código de Seguridad obligatorio
                      </div>
                    </div>
                  </div>
                  <hr class="mb-4">
                  <div class="d-grid gap-2">
                    <button class="btn btn-primary btn-lg" onClick="confirmacionContinuar()" type="button">Pagar</button>
                  </div>
                </form>
              </div>
            </div>
            <br>
          </div>

        <!--  -->
    </body>
    <script>

        function validaDatosEnvio () {
            let valor
            let camposEnvio = ["nombre", "apellido-paterno", "telefono", "calle", "numero-exterior", "pais", "colonia", "estado", "municipio", "codigo-postal", "cc-name", "cc-number", "cc-expiration", "cc-cvv"]
            let valido = true
            camposEnvio.forEach(element => {
                valor = $ ("#" + element).val ()
                if (valor == "" || (element == "telefono" && ! (/\d{10}/.test (valor))) || (element == "codigo-postal" && ! (/\d{5}/.test (valor)))) {
                    valido = false
                    $ ("#" + element) [0].classList.add ("is-invalid")
                } else {
                    $ ("#" + element) [0].classList.remove ("is-invalid")
                }
            })
            return valido
        }

        function confirmacionContinuar () {
            let valido = false;
            if ( validaDatosEnvio () ) {
              solicitud("post", "/comprar", {cart: sessionStorage.getItem('shoppingCart')});
              shoppingCart.clearCart();
            }
        }

    </script>
    
    <script type="text/javascript" th:src="@{/js/chopstore-script.js}"></script>

</html>